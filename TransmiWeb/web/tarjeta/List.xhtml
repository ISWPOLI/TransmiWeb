<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:composition template="/Plantilla/plantilla.xhtml">
        <ui:define name="title">
            <h:outputText value="#{bundle.ListTarjetaTitle}"></h:outputText>
        </ui:define>
        <ui:define name="body">
            <h:form id="form">
                <div class="row">
                    <table id="example" class="display highlight" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th>Codigo Tarjeta</th>
                                <th>Usuario</th>
                                <th>Saldo</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <c:forEach items="#{tarjetaController.TarjetasDeUsuario()}" var="item">
                                <tr>
                                    <td>#{item.IDTarjeta}</td>
                                    <td>#{item.IDUsuario.nombre}</td>
                                    <td>$ #{item.saldo}</td>
                                    <td>#{item.IDEstado.descripcion}</td>
                                    <td>
                                        <h:commandLink onclick="reportar(#{item.IDTarjeta})"><i class="material-icons">report</i></h:commandLink>
                                        <h:commandLink><i class="material-icons">monetization_on</i></h:commandLink>
                                        <h:commandLink><i class="material-icons">view_list</i></h:commandLink>
                                    </td>
                                </tr>
                            </c:forEach>
                        </tbody>
                    </table>
                </div>
            </h:form>
            <h:form id="recargarForm">

                <div id="recarga" class="modal">
                    <div class="modal-content">
                        <h4>Recargar</h4>
                        <h:selectOneMenu value="#{solicitudesController.valorRecarga}" class="input-field col s12">
                            <f:selectItem itemValue="0" itemLabel="Seleccione un valor" itemDisabled="true"/>
                            <f:selectItem itemLabel="2000" itemValue="2000"/>
                        </h:selectOneMenu>
                    </div>
                    <div class="modal-footer">
                        <h:commandLink class="waves-effect waves-light btn red" value="Si" action="#{solicitudesController.recargar()}"/>
                        <a href="#!" class="modal-action modal-close waves-effect waves-light btn grey">Cancelar</a>
                    </div>
                </div> 
            </h:form>
            <h:form id="myform">
                <div id="reporte" class="modal bottom-sheet">
                    <div class="modal-content">
                        <h4>Confirmar</h4>
                        <p >Está seguro que desea reportar la tarjeta N° <span id="idTar"></span>, Se aplicará un costo de $2000 para recuperarla</p>
                        <h:inputHidden value="#{tarjetaController.selectedItemIndex}" id="hiddenId" />
                        <h:inputHidden value="#{movimientosController.selectedItemIndex}" id="codigo" />
                    </div>
                    <div class="modal-footer">
                        <h:commandLink class="waves-effect waves-light btn red" action="#{tarjetaController.update()}" value="Si"/>
                        <a href="#!" class="modal-action modal-close waves-effect waves-light btn grey">Cancelar</a>
                    </div>
                </div> 
            </h:form>



            <script>
                $(document).ready(function () {

                    
                });
                function reportar(id) {
                        $("#idTar").html(id);
                        $('#reporte').modal('open');
                    }
            </script>


        </ui:define>

    </ui:composition>


</html>
